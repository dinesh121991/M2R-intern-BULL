YUI.add("rg.core.util.ClipboardPlugin",function(a){a.namespace("rg.core.util"),a.rg.core.util.ClipboardPlugin=a.Base.create("ClipboardPlugin",a.Plugin.Base,[],{handlers:[],initializer:function(b){var c=a.one("document");b&&(b.textPattern&&this.set("textPattern",b.textPattern),b.htmlPattern&&this.set("htmlPattern",b.htmlPattern),b.context&&this.set("context",b.context)),this.handlers=[],this.handlers.push(c.on("copy",this.attachMessageToClipboard,this))},destructor:function(){a.Array.each(this.handlers,function(a){a.detach()})},sendAjaxExperimentData:function(b){var c=a.one("body").hasClass("logged-out"),d=c?"Logged out":"Logged in",e=d+" - "+this.get("context");a.rg.ajax("application.AjaxCommon.ajaxClipboardExperiment.html",{context:e}),window.ga&&ga("send","social","researchgate","copy",e+": "+b)},attachMessageToClipboard:function(b){if(b=b._event||window.event,b.clipboardData||window.clipboardData){var c,d,e,f,g=new Date,h=window.datetimeHelpers.getFullDatestring(g),i=this.get("textPattern").replace(/\{\{title\}\}/g,document.title).replace(/\{\{url\}\}/g,window.location.href).replace(/\{\{currentYear\}\}/g,g.getFullYear()).replace(/\{\{currentDate\}\}/g,h),j=this.get("htmlPattern").replace(/\{\{title\}\}/g,document.title).replace(/\{\{url\}\}/g,window.location.href).replace(/\{\{currentYear\}\}/g,g.getFullYear()).replace(/\{\{currentDate\}\}/g,h),k=document.createElement("div"),l=150,m=!!b.clipboardData,n=m?"text/plain":"text",o=m?b.clipboardData:window.clipboardData;if("undefined"!=typeof window.getSelection){if(e=window.getSelection(),f=e.baseNode||e.focusNode,!a.one(f).ancestors(".abstract, .pub-abstract, .document-viewer, .topic-post-text")._nodes.length)return;if(c=e.toString(),c.length<l)return;if(e.rangeCount){for(var p=0,q=e.rangeCount;q>p;++p)k.appendChild(e.getRangeAt(p).cloneContents());d=k.innerHTML}o.setData(n,c+" "+i),m&&o.setData("text/html",d+j)}else{if(!o.getData("Text"))return;if(c=o.getData("Text"),c.length<l)return;o.clearData(),o.setData(n,c+" "+i)}this.sendAjaxExperimentData(c),b.preventDefault()}}},{NS:"ClipboardPlugin",ATTRS:{textPattern:{value:"\n\n{{title}}. Available from: {{url}} [accessed {{currentDate}}]."},htmlPattern:{value:'\n<br><i>{{title}}</i>. Available from: <a href="{{url}}">{{url}}</a> [accessed {{currentDate}}].'},context:{value:null}}})},"1.0.0",{requires:["datetimeHelpers"]});
YUI.add("rg.core.layout.ResponsiveHelpers",function(a){a.namespace("rg.core.layout"),a.rg.core.layout.ResponsiveHelpers=a.Base.create("ResponsiveHelpers",a.Plugin.Base,[],{matchesBreakpoint:function(a,b){var c={l:1200,m:992,s:768},d=!1,e=!1,f="only screen";return window.matchMedia&&a&&a.length?("xs"===a?d="s":"s"===a?(d="m",e="s"):"m"===a?(d="l",e="m"):"l"===a?e="l":-1!==a.indexOf("-ge")?e=a.charAt(0):-1!==a.indexOf("-lt")&&(d=a.charAt(0)),e&&(f+=" and (min-width: "+c[e]+"px)"),d&&(f+=" and (max-width: "+(c[d]-1)+"px)"),"p"===b?f+=" and (orientation:portrait)":"l"===b&&(f+=" and (orientation:landscape)"),window.matchMedia(f).matches):!1}},{NS:"ResponsiveHelpers"})},"0.0.1",{requires:[]});
YUI.add("rg.views.publicliterature.PublicPublicationDetailsView",function(a){a.namespace("rg.views.publicliterature"),a.rg.views.publicliterature.PublicPublicationDetailsView=a.Base.create("publicliterature.PublicPublicationDetailsView",a.rg.WidgetView,[],{afterRendered:function(){a.one("document").plug(a.rg.core.util.ClipboardPlugin,{context:"publications"});var b=new a.rg.core.layout.ResponsiveHelpers;!b.matchesBreakpoint("s-lt")&&this.data.showSignUpDialog&&a.Lang.later(3e3,this,function(){a.rg.loadWidget("publicliterature.SignUpDialogPublication.html",{publicationUid:this.data.publicationUid},function(a){try{a.render({dialog:!0})}catch(b){}})},this)},destructor:function(){a.one("document").unplug(a.rg.core.util.ClipboardPlugin)}})},"1.0.0",{requires:["rg-utils-url","rg.core.util.ClipboardPlugin","rg.core.layout.ResponsiveHelpers"]});
YUI.add("rg.views.publicliterature.PublicationDetailItemView",function(a){a.namespace("rg.views.publicliterature"),a.rg.views.publicliterature.PublicationDetailItemView=a.Base.create("publicliterature.PublicationDetailItemView",a.rg.WidgetView,[],{afterRendered:function(){var b,c=this.get("container"),d=c.one(".js-pub-details");if(d&&(b=d.one(".js-tooltip-content")),b){var e,f=b.getAttribute("data-tooltip-for");e="container"===f?c:c.one(f),e&&e.plug(a.rg.widget.TooltipPlugin,{content:b.getContent(),type:"mouseenter",align:"bottom",delay:200,width:440,additionalClasses:"journal-info-tooltip",position:function(){var a=d.getXY()[0],b=e.getXY()[1]+e.get("offsetHeight");e.tooltip.get("overlay").get("boundingBox").addClass("tt-align-bottom"),e.tooltip.get("overlay").set("xy",[a,b]),e.tooltip.get("arrow").align(e.tooltip.get("host"),["tc","bc"])}})}}})},"1.0.0",{requires:["rg-tooltip"]});
YUI.add("rg.views.publicliterature.PublicationDetailAuthorListView",function(a){a.namespace("rg.views.publicliterature"),a.rg.views.publicliterature.PublicationDetailAuthorListView=a.Base.create("publicliterature.PublicationDetailAuthorListView",a.rg.WidgetView,[],{events:{".js-show-more":{click:"showMore"}},showMore:function(){var b=this.get("container"),c=b.one(".js-loading"),d=b.one(".js-show-more"),e=b.one(".js-people-list"),f=this;c.addClass("rendering-small"),d.addClass("btn-disabled"),a.rg.ajax(this.widgetUrl,{offset:this.data.nextOffset},function(b){return b.success?(a.Array.each(b.result.data.peopleItems,function(b){a.rg.createWidget(b,function(a){a.render({append:e})},this)}),c.removeClass("rendering-small"),d.removeClass("btn-disabled"),f.data.nextOffset=b.result.data.nextOffset,void(b.result.data.hasMore||d.hide())):void a.rg.notify("Error loading additional authors","warning")},this,{},"GET")}})},"1.0.0",{requires:["rg-header-notify"]});
YUI.add("rg.views.publicliterature.PublicationDetailAccountItemView",function(a){a.namespace("rg.views.publicliterature"),a.rg.views.publicliterature.PublicationDetailAccountItemView=a.Base.create("publicliterature.PublicationDetailAccountItemView",a.rg.WidgetView,[],{afterRendered:function(){var b=this.get("container"),c=b.one(".js-tooltip-content");c&&b.plug(a.rg.widget.TooltipPlugin,{content:c,type:"mouseenter",persistWhenMouseover:!0,align:"bottom",width:320,arrowOffset:[11,0],delay:500,position:function(){var a=this.get("host"),b=this.get("overlay"),c=this.get("arrow");b.get("boundingBox").addClass("tt-align-bottom"),b.align(a,["tl","bl"]),c.align(a,["tl","bl"])}})}})},"1.0.0",{requires:["rg-tooltip"]});
YUI.add("rg.views.application.PeopleItemView",function(a){a.namespace("rg.views.application"),a.rg.views.application.PeopleItemView=a.Base.create("application.PeopleItemView",a.rg.WidgetView,[],{events:{".js-hide":{click:"hideUser"},".js-show-connection":{click:"showUserConnection"},".js-unhide":{click:"unhideUser"}},afterRendered:function(){var a=this.get("container");a.on("mouseover",this.showHideLink,this),a.on("mouseout",this.hideHideLink,this),a.on("mouseover",this.showConnectionLink,this),a.on("mouseout",this.hideConnectionLink,this),this._tooltipHandling(a)},_tooltipHandling:function(b){var c=b.one(".tooltip-container");if(c){var d,e=c.getAttribute("data-tooltip-for");d="container"===e?b:b.one(e);var f=c.getAttribute("data-tooltip-align"),g=[0,0],h=c.getAttribute("data-tooltip-push-direction"),i=c.getAttribute("data-tooltip-push-amount");if(!d)return;if(a.Lang.isUndefined(f)&&(f="bottom"),!a.Lang.isUndefined(h)&&!a.Lang.isUndefined(i))switch(h){case"right":g=[parseInt(i,10),0];break;case"left":g=[-parseInt(i,10),0];break;case"top":g=[0,parseInt(i,10)];break;case"bottom":g=[0,-parseInt(i,10)]}var j={content:c.getContent(),type:"mouseenter",align:f,overlayOffset:g,arrowOffset:g,delay:200};d.plug(a.rg.widget.TooltipPlugin,j)}},safeDestroy:function(){var a=this.get("container"),b=a.one(".tooltip-container");if(b){var c,d=b.getAttribute("data-tooltip-for");c="container"===d?a:a.one(d),c&&c.tooltip&&(c.tooltip.hide(),c.tooltip.destroy(!0))}this.destroy(!0)},hideUser:function(b){b.preventDefault();var c=this;a.fire("PeopleItem:HideUser",{key:this.data.accountKey,callback:function(){var a=c.get("container");a.addClass("with-overlay"),a.one(".item-content").addClass("under-overlay"),a.one(".item-overlaying").addClass("overlay"),a.one(".unhide-button-container").removeClass("hidden"),a.one(".hide-button-container").addClass("hidden")}})},unhideUser:function(b){b.preventDefault();var c=this;a.fire("PeopleItem:UnhideUser",{key:this.data.accountKey,callback:function(){var a=c.get("container");a.removeClass("with-overlay"),a.one(".item-content").removeClass("under-overlay"),a.one(".item-overlaying").removeClass("overlay"),a.one(".unhide-button-container").addClass("hidden"),a.one(".hide-button-container").removeClass("hidden")}})},showHideLink:function(){var a=this.get("container").one(".hide-button-container"),b=this.get("container").one(".unhide-button-container");a&&b&&b.hasClass("hidden")&&a.show()},hideHideLink:function(){var a=this.get("container").one(".hide-button-container"),b=this.get("container").one(".unhide-button-container");a&&b&&b.hasClass("hidden")&&a.hide()},showConnectionLink:function(){var a=this.get("container").one(".connection-button-container");a&&a.show()},hideConnectionLink:function(){var a=this.get("container").one(".connection-button-container");a&&a.hide()},showUserConnection:function(b){b.preventDefault(),a.fire("PeopleItem:ShowUserConnection",{key:this.data.accountKey})}})},"1.0.0",{requires:["rg-tooltip"]});
YUI.add("rg-like",function(a){a.namespace("rg.like");var b={NONE:0,LIKED:1,DISLIKED:-1};a.rg.like.LIKE_STATE=b,a.rg.like.Like=a.Base.create("Y.rg.like.Like",a.Base,[],{initializer:function(){this.on("stateChange",function(a){this.set("displayCount",this.get("displayCount")+a.newVal-a.prevVal),a.prevVal!=a.newVal&&(a.newVal==b.NONE&&(a.prevVal==b.LIKED?this.set("likeCount",this.get("likeCount")-1):this.set("dislikeCount",this.get("dislikeCount")-1)),a.newVal==b.LIKED&&(this.set("likeCount",this.get("likeCount")+1),a.prevVal==b.DISLIKED&&this.set("dislikeCount",this.get("dislikeCount")-1)),a.newVal==b.DISLIKED&&(this.set("dislikeCount",this.get("dislikeCount")+1),a.prevVal==b.LIKED&&this.set("likeCount",this.get("likeCount")-1)))})},isLiked:function(){return this.get("state")==b.LIKED},isDisliked:function(){return this.get("state")==b.DISLIKED},like:function(a,c,d,e){this._changeState(b.LIKED,this.get("likeUrl"),a,{onSuccess:c,onError:d,context:e||this})},dislike:function(a,c,d,e){this._changeState(b.DISLIKED,this.get("dislikeUrl"),a,{onSuccess:c,onError:d,context:e||this})},_changeState:function(b,c,d,e){return this.get("state")==b?void this.removeLike(d,e):(this.set("state",b),void a.rg.ajax(c,d,this._onStateChanged,this,e))},_onStateChanged:function(a,b){return a.success?void(b.onSuccess&&b.onSuccess.call(b.context,a)):void(b.onError&&b.onError.call(b.context,a))},removeLike:function(c,d,e,f){var g;a.Lang.isObject(d)&&!a.Lang.isFunction(d)&&(g=d),this.set("state",b.NONE),a.rg.ajax(this.get("removeLikeUrl"),c,this._onStateChanged,this,g||{onSuccess:d,onError:e,context:f||this})}},{ATTRS:{displayCount:{value:0},likeCount:{value:0},dislikeCount:{value:0},likeUrl:{},dislikeUrl:{},removeLikeUrl:{},state:{value:b.NONE,setter:function(c){return a.Lang.isNumber(c)?c:b[c.toUpperCase()]},validator:function(c){if(a.Lang.isNumber(c)){for(var d in b)if(b.hasOwnProperty(d)&&b[d]==c)return!0;return!1}return null!=b[c.toUpperCase()]}}}})},"0.0.1",{requires:[]});
YUI.add("rg-container-hover",function(a){a.namespace("rg.plugins"),a.rg.plugins.ContainerHover=a.Base.create("ContainerHover",a.Plugin.Base,[],{initializer:function(){var a=this.get("host"),b=this.get("itemSelector"),c=this.get("_handles");c.push(b?a.delegate("hover",this._overFn,this._outFn,b,this):a.on("hover",this._overFn,this._outFn,this))},destructor:function(){a.Array.each(this.get("_handles"),function(a){a.detach()})},_overFn:function(a){var b=this.get("overCallback");a.currentTarget.addClass(this.get("cssClasses")),b&&b.call(this.get("overCtx"),a)},_outFn:function(a){var b=this.get("outCallback");a.currentTarget.removeClass(this.get("cssClasses")),b&&b.call(this.get("outCtx"),a)}},{NS:"ContainerHover",ATTRS:{_handles:{value:[]},itemSelector:{},cssClasses:{value:"hover"},overCtx:{value:null},overCallback:{value:null},outCtx:{value:null},outCallback:{value:null}}})},"0.0.1",{requires:["event-hover"]});
YUI.add("rg-expander",function(a){a.namespace("rg.plugins"),a.rg.plugins.Expander=a.Base.create("Expander",a.Plugin.Base,[],{initializer:function(b){this.container=this.get("host");var c=this.container.get("offsetHeight"),d=this.container.get("scrollHeight");if(this.set("collapsedHeight",c),d>c||b.forceShowLoadMore){var e=a.Node.create("<div></div>"),f=a.Node.create("<a></a>"),g=a.Node.create("<span></span>");e.addClass("less-new-line"),g.setContent(this.get("expandLinkText")),f.addClass(this.get("toggleLinkClass")),f.addClass("expand-link"),f.on("click",this.toggle,this),f.append(g),this.container.append(e),this.container.append(f),this.toggleLink=f,this.toggleLinkText=g}else this.container.setStyle("maxHeight","none")},toggle:function(a){a&&a.preventDefault(),this.container.hasClass(this.get("containerCollapsedClass"))?(this.container.removeClass(this.get("containerCollapsedClass")),this.toggleLinkText.setContent(this.get("collapseLinkText")),this.toggleLink.removeClass("expand-link").addClass("collapse-link"),this.container.setStyle("maxHeight","none"),this.container.fire("expand")):(this.container.addClass(this.get("containerCollapsedClass")),this.toggleLinkText.setContent(this.get("expandLinkText")),this.toggleLink.removeClass("collapse-link").addClass("expand-link"),this.container.setStyle("maxHeight",this.get("collapsedHeight")),this.container.fire("collapse"))}},{NS:"Expander",ATTRS:{collapseLinkText:{value:"[less]"},expandLinkText:{value:"[more]"},toggleLinkClass:{value:"js-expander-toggle"},containerCollapsedClass:{value:"js-expander-collapsed"},collapsedHeight:{value:null}}})},"0.0.1",{requires:["event-hover"]});
YUI.add("rg.views.publicliterature.PublicationAbstractView",function(a){a.namespace("rg.views.publicliterature"),a.rg.views.publicliterature.PublicationAbstractView=a.Base.create("publicliterature.PublicationAbstractView",a.rg.WidgetView,[],{events:{".edit-link":{click:"openEdit"},".add-link":{click:"openEdit"}},afterRendered:function(){if(this.data.canEdit&&!this.data.isAdmin&&!this.data["abstract"]){var b=this.get("container").one(".add-link");b&&(b.plug(a.rg.widget.TooltipPlugin,{content:"Add an abstract to let other researchers know what your publication is about.",type:"custom",overlayOffset:[65,0],width:220}),b.tooltip.show(),a.one("body").once("click",function(){b.unplug(a.rg.widget.TooltipPlugin)}))}this.data.canEdit&&this.data["abstract"]&&this.get("container").plug(a.rg.plugins.ContainerHover),this.get("container").one(".js-expander-container")&&this.get("container").one(".js-expander-container").plug(a.rg.plugins.Expander)},openEdit:function(b){var c=this.get("container");c.addClass("rendering"),b.preventDefault(),a.rg.loadWidget("literature.PublicationAbstractEdit.html",{publicationUid:this.data.publicationUid},function(a){a.render({replace:c})},this)}})},"1.0.0",{requires:["rg-like","rg-tooltip","rg-container-hover","rg-expander"]});
var googletag=googletag||{};googletag.cmd=googletag.cmd||[],console&&console.time&&console.timeStamp&&console.timeStamp("RG JS view"),YUI.add("rg.views.application.GoogleDfpSlotView",function(a){a.namespace("rg.views.application"),a.rg.views.application.GoogleDfpSlotView=a.Base.create("application.GoogleDfpSlotView",a.rg.WidgetView,[],{afterRendered:function(){a.Lang.isUndefined(window._slotmessagehandler)&&(window._slotmessagehandler=a.on("message",function(b){if(a.Lang.isString(b._event.data)){var c=b._event.data.split(":"),d=c[0],e=c[1];"openDialog"!=d||a.Lang.isUndefined(e)||a.rg.loadWidgetInDialog("ads.LeadGenDialog.html",{orderId:e})}})),this.data.loadAdsEarly||(console&&console.time&&console.timeStamp&&(console.timeStamp("RG afterRendered"),console.timeEnd("HTML to afterRendered")),this.initAdSlot())},initAdSlot:function(){console&&console.time&&console.timeStamp&&console.timeStamp("RG initAdSlot"),this.trackLoadingStages("ClientSideAfterRendered");var b=this.data.url,c=this.data.snippetId,d=this.data.targetingInfo,e=this.data.slotSizes,f=this;googletag.cmd.push(function(){var g=googletag.defineSlot(b,e,c).addService(googletag.pubads());if(d)for(var h in d)d.hasOwnProperty(h)&&g.setTargeting(h,d[h]);f.trackLoadingStages("TargetingInfoSet"),googletag.pubads().enableSingleRequest(),g.setCollapseEmptyDiv(!0),googletag.enableServices(),g.oldRenderEnded=g.oldRenderEnded||g.renderEnded,g.renderEnded=function(b){a.rg.ajax("application.GoogleDfpSlot.countImpression.html",{isEmpty:b.isEmpty?!0:!1,slotId:f.data.slotId,adSlotReferrer:f.data.adSlotReferrer,creativeId:b.creativeId,lineItemId:b.lineItemId},null,this,null,"POST"),f.trackLoadingStages("SlotRenderEnded"),console&&console.time&&console.timeStamp&&(console.timeStamp("RG slotRenderEnded"),console.timeEnd("HTML to slotRenderEnded")),g.oldRenderEnded()}}),googletag.cmd.push(function(){googletag.display(c),f.trackLoadingStages("GoogleTagCmdPush")})},trackLoadingStages:function(b){a.rg.ajax("application.GoogleDfpSlot.ajaxTrackLoading.html",{type:b},null,this,null,"POST")}})},"1.0.0",{requires:["google-publisher-tag"]});
YUI.add("rg.views.publicliterature.PublicationResourcesView",function(a){a.namespace("rg.views.publicliterature"),a.rg.views.publicliterature.PublicationResourcesView=a.Base.create("publicliterature.PublicationResourcesView",a.rg.WidgetView,[],{events:{global:{"PublicationFulltextPreview::viewOtherSources":"_toggleContainer"},".js-toggle":{click:"_toggleContainer"}},_toggleContainer:function(){var a=this.get("container"),b=a.one(".js-collapse-list");if(b){var c=b.hasClass("hidden");c?(a.one(".js-expand-list").addClass("hidden"),b.removeClass("hidden"),a.all(".pub-resource-item").show()):(a.one(".js-expand-list").removeClass("hidden"),b.addClass("hidden"),a.all(".pub-resource-item").hide()),a.one(".scroll-wrapper")&&(c?a.one(".scroll-wrapper").removeClass("hidden"):a.one(".scroll-wrapper").addClass("hidden"))}}})},"0.0.1",{requires:["rg-header-notify","transition","rg-anim"]});
YUI.add("rg-confirm",function(a){a.namespace("rg"),a.rg.confirm=function(b){if(b.hasInputBox){if(b.body=a.Node.create("<p>"+b.body+"</p>"),b.inputBoxLabel){var c=a.Node.create("<label>"+b.inputBoxLabel+"</label>");b.body.appendChild(c)}var d=a.Node.create('<input type="text" class="js-confirm-input" class="text"/>');b.body.appendChild(d)}b=a.merge({headerContent:"<h4>"+b.header+"</h4>",bodyContent:b.body,footerContent:"",zIndex:1100,render:!0,visible:!1,plugins:[{fn:a.rg.widget.OverlayPopup,cfg:{handleResize:!0,hideOnClickOutside:!1}}]},b);var e,f,g=new a.rg.widget.Dialog(b),h=g.getStdModNode(a.WidgetStdMod.FOOTER);g.get("contentBox").addClass("confirm-dialog"),g.get("contentBox").one(".close a").remove(!0),e=a.Node.create("<div></div>"),e.addClass("confirm-actions rf"),a.Array.each(b.buttons,function(b){var c=a.Node.create("<a></a>");c.set("href","javascript:;"),c.addClass("btn btn-margin btn-confirm-dialog"),c.addClass(b.primary?"btn-promote":b.attention?"btn-attention":"btn-default"),c.setContent(b.label),c.set("id",b.id),e.append(c)}),h.append(e),f=a.Node.create('<div class="clear"></div>'),h.append(f);var i=function(){var a;return b.hasInputBox&&(a=g.bodyNode.one(".js-confirm-input").get("value")),a};return g.get("boundingBox").on("key",function(){h.one("#confirm")&&(g.hide(),g.destroy(),b.callback.call(b.context||this,"confirm",i()))},"enter",this),g.get("boundingBox").on("key",function(){h.one("#cancel")&&(g.hide(),g.destroy(),b.callback.call(b.context||this,"cancel",i()))},"esc",this),h.all(".btn-confirm-dialog").on("click",function(a){g.hide(),g.destroy(),b.callback&&b.callback.call(b.context||this,a.target.get("id"),i())},this),g.show(),g}},"0.2.0",{requires:["rg-overlay","overlay","event-key"]});
