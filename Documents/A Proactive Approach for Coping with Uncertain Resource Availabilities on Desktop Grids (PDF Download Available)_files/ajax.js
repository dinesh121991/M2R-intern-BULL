YUI.add("rg-widgetloader-renderer",function(a){a.namespace("rg.widget");var b=function(b,c){b.yuiModules&&(c.yuiModules=c.yuiModules.concat(b.yuiModules)),b.templateExtensions&&(c.yuiModules=c.yuiModules.concat(b.templateExtensions)),b.template&&"object"==typeof b.template||c.yuiModules.push(b.templateName),a.Object.each(b.partials,function(a){"string"==typeof a&&c.yuiModules.push(a)}),c.yuiModules=a.Array.dedupe(c.yuiModules)},c=[],d=function(e,f){var g;if(e&&"object"==typeof e&&!e._isReact)if(e.templateName){e.toString=function(){var b=a.rg.WidgetView.getInstance(e),d=i(b);return c.push(b),d},b(e,f);for(g in e.data)e.data.hasOwnProperty(g)&&(e.data[g]=d(e.data[g],f))}else for(g in e)e.hasOwnProperty(g)&&(e[g]=d(e[g],f));else e&&"object"==typeof e&&e._isReact&&(e.toString=function(){var b=a.rg.ReactWidgetView.getInstance(e),d=i(b);return c.push(b),d});return e},e=function(b,c,d){a.use(c.yuiModules,function(){d&&d(b)})};a.rg.widget.prepareWidgetTree=function(a,b){var c={yuiModules:[]};a=d(a,c),e(a,c,b)};var f=function(b,d,e){var f,h,i;if(d.hasOwnProperty("replace"))f=a.rg.widget.ReplaceRenderer,h=d.replace;else if(d.hasOwnProperty("replaceContent"))f=a.rg.widget.ReplaceContentRenderer,h=d.replaceContent;else if(d.hasOwnProperty("append"))f=a.rg.widget.AppendRenderer,h=d.append;else if(d.hasOwnProperty("prepend"))f=a.rg.widget.PrependRenderer,h=d.prepend;else if(d.hasOwnProperty("beforeNode"))f=a.rg.widget.BeforeNodeRenderer,h=d.beforeNode;else if(d.hasOwnProperty("afterNode"))f=a.rg.widget.AfterNodeRenderer,h=d.afterNode;else if(d.hasOwnProperty("refresh"))f=a.rg.widget.RefreshRenderer,h=d.refresh;else if(d.hasOwnProperty("dialog"))f=a.rg.widget.DialogRenderer,h=d.dialog;else if(d.hasOwnProperty("dialogSections"))f=a.rg.widget.DialogSectionRenderer,h=d.dialogSections;else if(d.hasOwnProperty("openedDialog"))f=a.rg.widget.OpenedDialogRenderer.renderDialog,h=d.openedDialog;else if(d.hasOwnProperty("tooltip"))f=a.rg.widget.TooltipRenderer.renderTooltip,h=d.tooltip;else{if(!d.hasOwnProperty("renderer")||"function"!=typeof d.renderer)throw new Error("no valid renderer specified");f=d.renderer,h={}}return i=f(b,e,h),i===!1?(c=[],!1):(a.Array.each(c,function(b){var c=a.one("#"+b.id);c&&b.setContainer(c)}),c.push(b),"function"==typeof d.afterRendered&&b.once("rendered",function(){d.afterRendered.call(b,b.get("container"))}),void(("function"!=typeof d.after||d.after.call(b,b.get("container"),a.bind(function(){g()}))!==!1)&&g()))},g=function(){for(var a;a=c.shift();)h(a)},h=function(a){var b=a.get("container");b&&a.fire("rendered",b)},i=function(b){var c=b.data;if(a.Array.each(b.templateExtensions,function(b){c=a.merge(window[b],c)}),!b.template){var d=a.rg.stubloader.get(b.templateName);b.template=a.rg.createHoganTemplate(d.compiledTemplate,d.templateString)}return a.Object.each(b.partials,function(c,d){if("string"==typeof c){var e=a.rg.stubloader.get(c);b.partials[d]=a.rg.createHoganTemplate(e.compiledTemplate,e.templateString)}}),b.template.render(c,b.partials)};a.rg.createHoganTemplate=function(a,b){var c="var tpl = "+a+"; return tpl.call(this, c, p, i);",d=new Function("c","p","i",c);return new Hogan.Template(d,b,Hogan,{})},a.rg.widget.renderWidgetTree=function(b,c){var d=a.Node.create(i(b));("function"!=typeof c.before||c.before.call(b,d,a.bind(function(){f(b,c,d)}))!==!1)&&f(b,c,d)}},"0.0.1",{requires:["Hogan","rg-widgetloader-renderers"]});
YUI.add("rg.PageReadyHandler",function(a){a.namespace("rg");var b,c=a.Base.create("PageReadyHandler",a.Base,[],{initializer:function(){this.handle=this.on("pageReadyChange",function(a){a.newVal&&(this.handle.detach(),this.executeCallbacks())},this)},destructor:function(){this.handle&&this.handle.detach()},registerCallback:function(b,c){return this.get("pageReady")?void b.call(c):void this.get("callbacks").push(a.bind(b,c))},executeCallbacks:function(){a.Array.each(this.get("callbacks"),function(a){a.call()},this)}},{ATTRS:{pageReady:{value:!1},callbacks:{value:[]}}}),d=new c,e=function(){return!a.one(".js-nozzle-wrapper")},f=function(){!d.get("pageReady")&&e()&&d.set("pageReady",!0)},g=function(){e()&&b.detach(),f()};b=a.on("nozzleWidgetRendered",g),a.once("load",f),a.rg.PageReadyHandler=d},"1.0.0",{requires:[]});
YUI.add("rg-widgetloader-pushstate",function(a){a.namespace("rg"),a.namespace("rg.widget");var b,c="rendering";a.rg.CSS_RENDERING=c,a.rg.changePageLayout=b=function(b){var d=b.pageLayout;if(d)for(var e in d)if(d.hasOwnProperty(e)){var f=a.one(e),g=d[e];f.hasClass(c)&&(g+=" "+c),f.setAttribute("class",g)}b.pageTitle&&(document.title=b.pageTitle)};var d=function(b,c){var d={popStateUrl:null,pushStateUrl:null,widget:null},e=a.merge(d,c);a.fire(b,e)};a.rg.emptyStateHandler=function(){};var e=!1,f=function(){var f;e||(f=window.location.href,e=!0,window.onpopstate=function(e){var g,h,i,j,k,l,m,n,o,p,q;if(!e.state||!e.state.pushStateUrl)return void a.rg.emptyStateHandler(f);if(g=e.state.pushStateUrl,h=e.state.targetContainer,i=e.state.renderer,j=e.state.beforeLoadEvent,k=e.state.beforeEvent,l=e.state.afterEvent,m=e.state.afterRenderedEvent,o=e.state.disablePageChangeLayout,p=e.state.pushStateConfig,q=e.state.additionalEventPayload,p)for(var r in p)if(p.hasOwnProperty(r)){if(n=a.one(r),!n)continue;g=p[r].url,i=p[r].renderer;break}n||(n=a.one(h)),j&&d(j,{popStateUrl:g,additionalEventPayload:q}),n.addClass(c),a.rg.cancelRunningRequests(),a.rg.addRequestToStack(a.rg.loadWidget(g,{},function(a){var e={before:function(){k&&d(k,{popStateUrl:g,widget:a,additionalEventPayload:q})},after:function(){o||b(a),l&&d(l,{popStateUrl:g,widget:a,additionalEventPayload:q})},afterRendered:function(){n&&n.getDOMNode()&&n.removeClass(c),m&&d(m,{popStateUrl:g,widget:a,additionalEventPayload:q})}};e[i]=n,a.render(e)},this,!0))})},g=function(a,e,f,g){var h={before:function(){a.beforeEvent&&d(a.beforeEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})},after:function(){a.disablePageChangeLayout||b(e),a.afterEvent&&d(a.afterEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})},afterRendered:function(){g&&g.getDOMNode()&&g.removeClass(c),a.afterRenderedEvent&&d(a.afterRenderedEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})}};return h[f]=g,h};a.rg.widget.handleAjaxPageLoad=function(b){if(2!==b.button){b.preventDefault(),b.stopPropagation();var c=b.currentTarget,d=c.getAttribute("href"),e=c.hasAttribute("data-pushState-config")?a.JSON.parse(c.getAttribute("data-pushState-config")):null,f="replaceContent",g="#content",h=c.hasAttribute("data-beforeload-event")?c.getAttribute("data-beforeload-event"):null,i=c.hasAttribute("data-before-event")?c.getAttribute("data-before-event"):null,j=c.hasAttribute("data-after-event")?c.getAttribute("data-after-event"):null,k=c.hasAttribute("data-after-rendered-event")?c.getAttribute("data-after-rendered-event"):null,l=c.hasAttribute("data-disable-layout-change")?c.getAttribute("data-disable-layout-change"):null,m=c.hasAttribute("data-additional-event-payload")?c.getAttribute("data-additional-event-payload"):null;if(this.onHandleAjaxPageLoad&&this.onHandleAjaxPageLoad.call(this,b),!b.preventAjaxPageLoad){var n={renderer:f,targetContainer:g,beforeLoadEvent:h,beforeEvent:i,afterEvent:j,afterRenderedEvent:k,disablePageChangeLayout:l,pushStateUrl:d,pushStateConfig:e,additionalEventPayload:m};a.rg.widget.ajaxPageLoad({},n)}}},a.rg.widget.ajaxPageLoad=function(b,e,h,i){var j,k,l,m,n={};if(e.pushStateConfig)for(m in e.pushStateConfig)if(e.pushStateConfig.hasOwnProperty(m)){if(l=a.one(m),!l)continue;j=e.pushStateConfig[m].url,k=e.pushStateConfig[m].renderer;break}e.pushStateUrlFiltered=a.rg.core.util.ParameterFilter.filterUrl(e.pushStateUrl),j&&k&&l||(j=e.pushStateUrl,k=e.renderer,l=a.one(e.targetContainer)),l.addClass(c);var o=a.StyleSheet(l.generateID()),p=m||e.targetContainer;return o.set(p+"."+c,{minHeight:"100%",overflow:"hidden"}),a.rg.supportsPushState()?(e.beforeLoadEvent&&d(e.beforeLoadEvent,{pushStateUrl:e.pushStateUrl,additionalEventPayload:e.additionalEventPayload}),f(),history.pushState(e,e.pushStateUrlFiltered,e.pushStateUrlFiltered),a.rg.cancelRunningRequests(),void a.rg.addRequestToStack(a.rg.loadWidget(j,b,function(b){b.success?(n=g(e,b,k,l),b.render(n)):a.rg.createWidget({id:"PageLoadError",templateName:"application/stubs/Error.html",data:{widgetId:"PageLoadError",errorCode:b.errorCode,correlationId:b.correlationId}},function(a){n=g(e,a,k,l),a.render(n)},this),a.Lang.isFunction(h)&&h.call(i,b)},this,!0))):void a.rg.loadWidget(j,b,function(a){n[k]=l,a.render(n),h&&h.call(a,i)},this)},a.rg.supportsPushState=function(){return!(!window.history||!history.pushState)},a.rg.supportsReplaceState=function(){return!(!window.history||!history.replaceState)},a.rg.requestStack=[],a.rg.addRequestToStack=function(b){a.rg.requestStack.push(b)},a.rg.cancelRunningRequests=function(){a.rg.requestStack=a.Array.filter(a.rg.requestStack,function(a){return a&&a.isInProgress&&a.isInProgress()&&a.abort(),!1})},a.on("load",function(){a.later(1e3,this,function(){a.rg.emptyStateHandler=function(b){a.rg.utils.url.forwardTo(b)}})})},"0.0.1",{requires:["json","stylesheet","rg-utils-url","rg.PageReadyHandler","rg.core.util.ParameterFilter"]});
YUI.add("rg.core.pagespeed.Monitoring",function(a){a.namespace("rg.core.pagespeed");var b=window.performance;a.rg.core.pagespeed.Monitoring={trackByImage:function(b,c){var d=a.Node.create("<img/>"),e=function(){a.Lang.later(0,null,function(){d.remove(!0)})};d.setStyles({overflow:"hidden",height:"0",width:"0"}),d.setAttrs({width:0,height:0}),d.on("load",e),d.on("error",e),a.one("body").append(d);var f=b+"?"+a.QueryString.stringify(c);d.set("src",f),a.later(0,null,function(){a.fire("core.pagespeed.Monitoring:tracked",c)})},monitorPage:function(b,c,d){var e=this;a.on("load",function(){a.later(3e3,e,function(){e.monitorPageLoad(b,c,d),e.monitorResources(b,c,d)})})},monitorPageLoad:function(a,c,d){var e,f;if(b&&b.timing&&window.rgConfig&&window.rgConfig.backendTime){e=b.timing,f=e.loadEventEnd?e.loadEventEnd:(new Date).getTime();var g=e.connectEnd-e.connectStart,h=e.responseEnd-e.requestStart,i=f-e.domLoading,j=f-e.navigationStart,k=e.responseStart-e.requestStart,l=e.domComplete-e.domLoading,m=e.loadEventStart?f-e.loadEventStart:0,n=e.domInteractive-e.domLoading,o=e.domComplete-e.domInteractive,p=Math.max(0,e.domainLookupEnd-e.domainLookupStart);g>6e4||0>g||h>6e4||0>h||i>6e4||0>i||j>6e4||0>j||k>6e4||0>k||this.trackByImage(a,{page:c,fp:d,connectTime:g,requestTime:h,renderTime:i,completeRequestTime:j,firstContentTime:k,backendTime:window.rgConfig.backendTime,domProcessingTime:l,loadEventTime:m,domLoadingTime:n,domCompletionTime:o,dnsLookupTime:p,continent:window.rgConfig.continent})}},monitorResources:function(c,d,e){if(b&&b.getEntriesByType&&"function"==typeof b.getEntriesByType&&window.rgConfig&&window.rgConfig.continent){var f=b.getEntriesByType("resource"),g={css:{count:0,totalDuration:0},js:{count:0,totalDuration:0},html:{count:0,totalDuration:0},image:{count:0,totalDuration:0}},h=0,i=0;a.Array.each(f,function(a){var b;if(a.name.match(/\.css$/))b="css";else if(a.name.match(/\.js$/))b="js";else if(a.name.match(/\.html$/))b="html";else{if(!a.name.match(/\.(png|jpeg|jpg|gif)$/))return;b="image"}g[b].count++,g[b].totalDuration+=parseInt(a.duration,10)}),a.Array.each(a.rg.performedRequests,function(a){h++,i+=parseInt(a.duration,10)});var j={page:d,fp:e,cssCount:g.css.count,cssTotalDuration:Math.max(0,g.css.totalDuration),jsCount:g.js.count,jsTotalDuration:Math.max(0,g.js.totalDuration),htmlCount:g.html.count,htmlTotalDuration:Math.max(0,g.html.totalDuration),imageCount:g.image.count,imageTotalDuration:Math.max(0,g.image.totalDuration),ajaxCount:h,ajaxTotalDuration:Math.max(0,i),continent:window.rgConfig.continent};a.fire("measuredResourceTimings",j),this.trackByImage(c,j)}}}},"1.0.0",{requires:["querystring","node"]});
YUI.add("rg-widgetloader",function(a){function b(b){if(b._isYUI){d(b.data);var c=a.rg.WidgetView.getInstance(b),e=a.one("#"+b.id);if(!e)return a.log('Cannot find container in DOM for widget "'+b.id+'".',"warn"),a.log(c),null;c.setContainer(e),c.fire("rendered",e)}else b._isReact&&a.rg.renderReactWidgetTree(b)}function c(a){var b;if(a&&"object"==typeof a){if(!a._isYUI)for(b in a)a.hasOwnProperty(b)&&(a[b]=c(a[b]));if(a.templateName){var d=a.widgetId?a.widgetId:a.id;return window.reactData.widgets[d]=a,d}}return a}function d(a){for(var c in a)a.hasOwnProperty(c)&&a[c]&&(a[c].templateName&&(a[c]._isYUI||a[c]._isReact)?b(a[c]):(a[c]instanceof Array||a[c]instanceof Object)&&d(a[c]))}a.namespace("rg"),a.namespace("rg.widget"),a.rg.EVENT_SEPARATOR=":";var e=function(){return(new Date).getTime()};a.rg.createWidget=function(b,c,d,f){if(a.rg.WidgetView.isRenderableWidget(b)){var g,h,i=function(b){b.once("rendered",function(){h=e(),f.data.renderTime=h-g,f.data.completeRequestTime=f.data.backendTime+f.data.renderTime,a.later(50,null,function(){a.rg.core.pagespeed.Monitoring.trackByImage(f.ep,f.data)})})};if(f&&(g=e()),b._isReact){var j=a.rg.ReactWidgetView.getInstance(b);return f&&i(j),void c.call(d,j)}a.use(b.yuiModules,function(a){var e=a.rg.WidgetView.getInstance(b);f&&i(e),c.call(d,e)})}},a.rg.createWidgetList=function(b,c,d){var e=[],f=[];a.Array.each(b,function(b){a.rg.WidgetView.isRenderableWidget(b)&&(f.push(b),b.yuiModules&&b.yuiModules.length>0&&(e=e.concat(b.yuiModules)))}),a.use(e,function(){var b=a.rg.getWidgetListViewInstance(f);c.call(d,b)})},a.rg.createInitialWidget=function(c){a.rg.widget.prepareWidgetTree(c,function(a){b(a)})},a.rg.renderReactWidgetTree=function(b){a.use(["webpack-common"],function(){window.reactData||(window.reactData={widgets:{},stores:{},entryPoints:{}});var d=b.templateName,e=b.widgetId?b.widgetId:b.id;b.stores&&(window.reactData.stores=b.stores),delete b.stores,c(b),window.reactData.entryPoints[d]||(window.reactData.entryPoints[d]=[]),window.reactData.entryPoints[d].push(e),a.use(["react_"+d],function(){window.reactData.entryPoints[d]&&window["renderReact_"+d]&&window["renderReact_"+d]()})})},a.rg.loadWidget=function(b,c,d,e,g,h,i,j,k){h=h?h:"GET",b=a.rg.utils.url.getUrlWithoutHash(b);var l=function(b){return b.success?(j&&"object"==typeof lscache&&lscache.set(j,b,k),void a.rg.createWidget(b.result,d,e,b.tracking)):void d.call(e,{render:function(){throw new Error(JSON.stringify(b.errors))},success:b.success,errors:b.errors,errorCode:b.result.errorCode,correlationId:b.result.correlationId})};if(j&&"object"==typeof lscache){var m=lscache.get(j);if(m)return void a.rg.createWidget(m.result,d,e,m.tracking)}var n=b+a.JSON.stringify(c);if(f[n]){var o=f[n];if(a.Lang.isString(o.widget)&&"loading"==o.widget)return f[n].widget="render",f[n].callback=d,void(f[n].context=e);if(!o.widget)return;return l(o.widget),void(o.keep||delete f[n])}return a.rg.ajaxDbwAware(b,c,l,e,null,h,i)};var f={};a.rg.preloadWidget=function(b,c,d){b=a.rg.utils.url.getUrlWithoutHash(b),c=c||{};var e=b+a.JSON.stringify(c);f[e]||(a.rg.ajaxDbwAware(b,c,function(d){return"render"==f[e].widget?(f[e].widget=d,void a.rg.loadWidget(b,c,f[e].callback,f[e].context)):(a.rg.widget.prepareWidgetTree(d),void(f[e].widget=d))}),f[e]={widget:"loading",keep:!!d})},a.rg.loadWidgetInDialog=function(b,c,d,e,f,g,h,i){var j=a.rg.widget.OpenedDialogRenderer.createDialog(h,i);a.rg.loadWidget(b,c,function(b){return b.success?void b.render({openedDialog:j,after:d}):(j.destroy(),void(a.Lang.isFunction(f)&&f.call(e,b.errors)))},e,!1,g)},a.rg.loadWidgetInTooltip=function(b,c,d,e,f,g){var h=a.rg.widget.TooltipRenderer.createTooltip(b,c);a.rg.loadWidget(d,e,function(a){a.render({tooltip:h,after:f})},g)},a.rg.generateEventIdentifier=function(b,c){var d;if(a.Lang.isFunction(b)&&b.NAME?d=b.NAME:a.Lang.isObject(b)&&b.fire&&b._eventPrefix&&(d=b._eventPrefix),!d)throw new Error("Object has no valid name identifier (NAME/eventPrefix).");if(!c)throw new Error("EventName is not valid.");var e=Array.prototype.slice.call(arguments,2);return[d,c,e.join(a.rg.EVENT_SEPARATOR)].join(a.rg.EVENT_SEPARATOR)},a.rg.hasOverlay=function(){return!!a.one(".has-overlay")}},"0.0.1",{requires:["rg.WidgetView","rg-header-notify","rg-string","json-stringify","rg-utils-url","rg-stubloader","rg-widgetloader-renderers","rg-widgetloader-renderer","rg-widgetloader-pushstate","rg.core.pagespeed.Monitoring","lscache"]});
YUI.add("rg-uri",function(a){a.namespace("rg");var b=function(){"use strict";function a(a){return null!==a&&""!==a}function b(a){a=a||"";var b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=b.exec(a),g=14,h=this;for(this.uriParts={};g--;)this.uriParts[d[g]]=f[g]||"";this.uriParts[e.name]={},this.uriParts[d[12]].replace(e.parser,function(a,b,c){b&&(h.uriParts[e.name][b]=c)}),this.queryObj=new c(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}return b.prototype.protocol=function(a){return"undefined"!=typeof a&&(this.uriParts.protocol=a),this.uriParts.protocol},b.prototype.hasAuthorityPrefix=function(a){return"undefined"!=typeof a&&(this.hasAuthorityPrefixUserPref=a),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},b.prototype.userInfo=function(a){return"undefined"!=typeof a&&(this.uriParts.userInfo=a),this.uriParts.userInfo},b.prototype.host=function(a){return"undefined"!=typeof a&&(this.uriParts.host=a),this.uriParts.host},b.prototype.port=function(a){return"undefined"!=typeof a&&(this.uriParts.port=a),this.uriParts.port},b.prototype.path=function(a){return"undefined"!=typeof a&&(this.uriParts.path=a),this.uriParts.path},b.prototype.query=function(a){return"undefined"!=typeof a&&(this.queryObj=new c(a)),this.queryObj},b.prototype.anchor=function(a){return"undefined"!=typeof a&&(this.uriParts.anchor=a),this.uriParts.anchor},b.prototype.setProtocol=function(a){return this.protocol(a),this},b.prototype.setHasAuthorityPrefix=function(a){return this.hasAuthorityPrefix(a),this},b.prototype.setUserInfo=function(a){return this.userInfo(a),this},b.prototype.setHost=function(a){return this.host(a),this},b.prototype.setPort=function(a){return this.port(a),this},b.prototype.setPath=function(a){return this.path(a),this},b.prototype.setQuery=function(a){return this.query(a),this},b.prototype.setAnchor=function(a){return this.anchor(a),this},b.prototype.getQueryParamValue=function(a){return this.query().getParamValue(a)},b.prototype.getQueryParamValues=function(a){return this.query().getParamValues(a)},b.prototype.deleteQueryParam=function(a,b){return 2===arguments.length?this.query().deleteParam(a,b):this.query().deleteParam(a),this},b.prototype.addQueryParam=function(a,b,c){return 3===arguments.length?this.query().addParam(a,b,c):this.query().addParam(a,b),this},b.prototype.replaceQueryParam=function(a,b,c){return 3===arguments.length?this.query().replaceParam(a,b,c):this.query().replaceParam(a,b),this},b.prototype.scheme=function(){var b="";return a(this.protocol())?(b+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(b+=":"),b+="//"):this.hasAuthorityPrefix()&&a(this.host())&&(b+="//"),b},b.prototype.origin=function(){var b=this.scheme();return a(this.userInfo())&&a(this.host())&&(b+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(b+="@")),a(this.host())&&(b+=this.host(),a(this.port())&&(b+=":"+this.port())),b},b.prototype.toString=function(){var b=this.origin();return a(this.path())&&(b+=this.path()),a(this.query().toString())&&(0!==this.query().toString().indexOf("?")&&(b+="?"),b+=this.query().toString()),a(this.anchor())&&(0!==this.anchor().indexOf("#")&&(b+="#"),b+=this.anchor()),b},b.prototype.clone=function(){return new b(this.toString())},b}(),c=function(){"use strict";function a(a){return a=decodeURIComponent(a),a=a.replace("+"," ")}function b(a){var b,c,d,e,f,g;if(this.params=[],"undefined"!=typeof a&&null!==a&&""!==a)for(0===a.indexOf("?")&&(a=a.substring(1)),c=a.toString().split(/[&;]/),b=0;b<c.length;b++)d=c[b],e=d.split("="),f=e[0],g=-1===d.indexOf("=")?null:null===e[1]?"":e[1],this.params.push([f,g])}return b.prototype.getParamValue=function(b){var c,d;for(d=0;d<this.params.length;d++)if(c=this.params[d],a(b)===a(c[0]))return c[1]},b.prototype.getParamValues=function(b){var c,d,e=[];for(c=0;c<this.params.length;c++)d=this.params[c],a(b)===a(d[0])&&e.push(d[1]);return e},b.prototype.deleteParam=function(b,c){var d,e,f,g,h=[];for(d=0;d<this.params.length;d++)e=this.params[d],f=a(e[0])===a(b),g=a(e[1])===a(c),(1===arguments.length&&!f||2===arguments.length&&!f&&!g)&&h.push(e);return this.params=h,this},b.prototype.addParam=function(a,b,c){return 3===arguments.length&&-1!==c?(c=Math.min(c,this.params.length),this.params.splice(c,0,[a,b])):arguments.length>0&&this.params.push([a,b]),this},b.prototype.replaceParam=function(b,c,d){var e,f,g=-1;if(3===arguments.length){for(e=0;e<this.params.length;e++)if(f=this.params[e],a(f[0])===a(b)&&decodeURIComponent(f[1])===a(d)){g=e;break}this.deleteParam(b,d).addParam(b,c,g)}else{for(e=0;e<this.params.length;e++)if(f=this.params[e],a(f[0])===a(b)){g=e;break}this.deleteParam(b),this.addParam(b,c,g)}return this},b.prototype.toString=function(){var a,b,c="";for(a=0;a<this.params.length;a++)b=this.params[a],c.length>0&&(c+="&"),c+=null===b[1]?b[0]:b.join("=");return c.length>0?"?"+c:c},b}();a.rg.Uri=b,a.rg.Query=c},"0.0.1",{});
YUI.add("rg-ajax",function(a){a.namespace("rg");var b;a.rg.ajaxDbwAware=function(b,c,d,e,f,g,h){return a.Lang.isUndefined(g)&&(g="GET"),g=g.toUpperCase(),a.rg.ajax(b,c,d,e,f,g,h)},a.rg.ajaxEncodePostData=function(b,c){var d=function e(b,d,f){for(var g in d)if(d.hasOwnProperty(g)){var h=b?b+"["+g+"]":g;a.Lang.isObject(d[g])?e(h,d[g],f):void 0!==d[g]&&null!==d[g]&&(f[h]=c?d[g]:encodeURIComponent(d[g]))}return f};return d("",b,{})},a.rg.ajaxEncodePostDataToQueryString=function(b){var c=a.rg.ajaxEncodePostData(b),d=[];for(var e in c)c.hasOwnProperty(e)&&d.push(e+"="+c[e]);return d.length>0?d.join("&"):null},a.rg.performedRequests=[];var c=function(b,c,d,e,f){var g={status:d.status,url:b,method:c,correlationId:d.getResponseHeader("X-Correlation-Id"),pageImpression:d.getResponseHeader("X-Rg-Pi")?!0:!1,ok:e,duration:f};a.rg.performedRequests.push(g),a.rg.performedRequests.length>50&&a.rg.performedRequests.shift(),a.fire("performedAjaxRequest",g)},d=function(d,e,f,g,h,i,j){var k=a.merge(j,{Accept:"application/json"});a.Lang.isObject(e)||(e={}),a.Lang.isUndefined(i)&&(i="POST"),("POST"===i||"PUT"===i||"DELETE"===i||"PATCH"===i)&&(e.request_token=a.one("#Rg-Request-Token").get("content"),k["Content-Type"]="application/x-www-form-urlencoded"),b=i;var l;return{headers:k,method:i,data:a.rg.ajaxEncodePostDataToQueryString(e),arguments:{fn:f,context:g,args:h},on:{start:function(){l=(new Date).getTime()},success:function(b,e,f){var g,h=(new Date).getTime();try{if(c(d,i,e,!0,parseInt(h-l,10)),g=a.JSON.parse(e.responseText),g.debug&&a.Array.each(g.debug,function(b){a.log(b.message,"info"),a.log(b.context,"info")}),g.requestToken&&a.one("#Rg-Request-Token").set("content",g.requestToken),g.success===!1&&g.result.redirect)return a.log("ajax redirect: "+g.result.redirect),void a.rg.utils.url.forwardTo(g.result.redirect)}catch(j){g={success:!1,result:{},errors:["An error occured while parsing server response."]}}a.Lang.isFunction(f.fn)&&f.fn.call(f.context,g,f.args)},failure:function(b,e,f){var g;try{c(d,i,e,!1),g=a.JSON.parse(e.responseText)}catch(h){g={success:!1,result:{},errors:["A server error occured"]}}g.success=!1,!a.Lang.isFunction(f.fn)||e&&!e.status||f.fn.call(f.context,g,f.args)}}}};a.rg.ajax=function(c,e,f,g,h,i,j){if(!c)throw new Error("Trying to perform ajax request to empty url");if(b&&"GET"!==b||"GET"!==i){var k=new a.rg.Uri(c);k.addQueryParam("dbw","true"),c=k.toString()}return a.io(c,d(c,e,f,g,h,i,j))},a.rg.queueAjax=function(c,e,f,g,h,i,j){if(!c)throw new Error("Trying to queue ajax request to empty url");if(b&&"GET"!==b||"GET"!==i){var k=new a.rg.Uri(c);k.addQueryParam("dbw","true"),c=k.toString()}return a.io.queue(c,d(c,e,f,g,h,i,j))}},"0.0.1",{requires:["io-base","io-queue","json","cookie","rg-uri","rg-utils-url"]});
