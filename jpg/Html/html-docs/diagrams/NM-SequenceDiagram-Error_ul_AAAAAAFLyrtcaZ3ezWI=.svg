<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="684" height="640"><defs></defs><g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="171" y="47" width="119" height="39" opacity="0.2"></rect></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="164" y="40" width="119" height="39"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 164 40 L 283 40 L 283 79 L 164 79 L 164 40 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="176" y="59.5">selct_p_job_test</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 224.5 80 L 224.5 656" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="387" y="47" width="73" height="39" opacity="0.2"></rect></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="380" y="40" width="73" height="39"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 380 40 L 453 40 L 453 79 L 380 79 L 380 40 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="392.5" y="59.5">run_now</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 417.5 80 L 417.5 656" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="579" y="47" width="87" height="39" opacity="0.2"></rect></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="572" y="40" width="87" height="39"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 572 40 L 659 40 L 659 79 L 572 79 L 572 40 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="583.5" y="59.5">cr_job_test</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 616.5 80 L 616.5 660" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="711" y="47" width="107" height="39" opacity="0.2"></rect></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="704" y="40" width="107" height="39"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 704 40 L 811 40 L 811 79 L 704 79 L 704 40 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="715.5" y="59.5">_select_nodes</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 758.5 80 L 758.5 660" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 452 180 L 721 180 L 731 190 L 731 218 L 452 218 L 452 180"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 452 180 L 721 180 L 731 190 L 731 218 L 452 218 L 452 180 L 452 180" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 721 180 L 721 190 L 731 190 L 721 180" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="198">if(cpu_cnt=NULL&amp; ! job_ptr -&gt; best_switch)</text></g></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="213">return SLURM_ERROR;</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 248 260 L 549 260 L 559 270 L 559 323 L 248 323 L 248 260"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 248 260 L 549 260 L 559 270 L 559 323 L 248 323 L 248 260 L 248 260" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 549 260 L 549 270 L 559 270 L 549 260" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="253" y="278">preemptee_candidates,preempt_by_qos and</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="253" y="291">preemptee_job_list is managed and remove</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="253" y="304">preemptable jobs resource and call the cr_job_test</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="253" y="317">once again with the preempted resource.</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 524 400 L 692 400 L 702 410 L 702 438 L 524 438 L 524 400"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 524 400 L 692 400 L 702 410 L 702 438 L 524 438 L 524 400 L 524 400" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 692 400 L 692 410 L 702 410 L 692 400" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="529" y="418">if(cr_type = CR_MEMORY)</text></g></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="529" y="433">   goto alloc_job;</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 452 488 L 713 488 L 723 498 L 723 591 L 452 591 L 452 488"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 452 488 L 713 488 L 723 498 L 723 591 L 452 591 L 452 488 L 452 488" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 713 488 L 713 498 L 723 498 L 713 488" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="506">else(cr_type=CR_MEMORY)</text></g></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="521">1)From the above processes, we can confirm</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="534">the job can run with the available resources,</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="547">2)Even   step 1 - 6 in ActivityDiagram will</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="560">give optimal set of resources by using</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="573">exc_core_map and part_res_record(partition)</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="457" y="586">details</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 417 628 L 224 628" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 234.16267485762415 623.790482243984 L 224 628 L 234.16267485762415 632.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="184" y="624">30 : return SLURM_SUCCESS | ERROR</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 616 432 L 646 432 L 646 452 L 622 452" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#000000" stroke="none" d="M 632.1626748576241 447.790482243984 L 622 452 L 632.1626748576241 456.209517756016"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 632.1626748576241 447.790482243984 L 622 452 L 632.1626748576241 456.209517756016 L 632.1626748576241 447.790482243984" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="617" y="448">29 : alloc_job</text></g></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="609" y="452" width="13" height="28"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 609 452 L 622 452 L 622 480 L 609 480 L 609 452 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 417 496 L 224 496" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 234.16267485762415 491.790482243984 L 224 496 L 234.16267485762415 500.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="188" y="492">28 : return SLURM_SUCCESS|ERROR</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 751 156 L 616 156" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 626.1626748576241 151.790482243984 L 616 156 L 626.1626748576241 160.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="623" y="173">25 : return *cpu_cnt;</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 417 249 L 224 249" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 234.16267485762415 244.790482243984 L 224 249 L 234.16267485762415 253.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="238" y="244">26 : return SLURM_ERROR</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 622 364 L 751 364" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#000000" stroke="none" d="M 740.8373251423759 368.209517756016 L 751 364 L 740.8373251423758 359.790482243984"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 740.8373251423759 368.209517756016 L 751 364 L 740.8373251423758 359.790482243984 L 740.8373251423759 368.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="540" y="361">27 : _select_nodes(free_cores,prefer_alloc_nodes)</text></g></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="751" y="364" width="13" height="28"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 751 364 L 764 364 L 764 392 L 751 392 L 751 364 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 616 104 L 751 104" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#000000" stroke="none" d="M 740.8373251423759 108.20951775601598 L 751 104 L 740.8373251423758 99.79048224398402"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 740.8373251423759 108.20951775601598 L 751 104 L 740.8373251423758 99.79048224398402 L 740.8373251423759 108.20951775601598" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="544" y="101">1 : _selct_nodes(free_cores,prefer_alloc_nodes)</text></g></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="751" y="104" width="13" height="60"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 751 104 L 764 104 L 764 164 L 751 164 L 751 104 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 616 608 L 417 608" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 427.16267485762415 603.790482243984 L 417 608 L 427.16267485762415 612.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="400" y="605">14 : return SLURM_SUCCESS| ERROR</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 616 237 L 417 237" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 427.16267485762415 232.790482243984 L 417 237 L 427.16267485762415 241.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="437" y="232">3 : return SLURM_ERROR</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 417 349 L 609 349" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="#000000" stroke="none" d="M 598.8373251423759 353.209517756016 L 609 349 L 598.8373251423758 344.790482243984"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 598.8373251423759 353.209517756016 L 609 349 L 598.8373251423758 344.790482243984 L 598.8373251423759 353.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="472" y="346">5 : cr_job_test</text></g></g><g transform="translate(-154,-30) scale(1,1)"><rect fill="#ffffff" stroke="none" x="609" y="349" width="13" height="55"></rect></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 609 349 L 622 349 L 622 404 L 609 404 L 609 349 Z Z" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 758 392 L 622 392" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 632.1626748576241 387.790482243984 L 622 392 L 632.1626748576241 396.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="632" y="387">7 : return *cpu_cnt;</text></g></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 609 478 L 417 478" stroke-miterlimit="10" stroke-dasharray="3"></path></g><g transform="translate(-154,-30) scale(1,1)"><path fill="none" stroke="#000000" d="M 427.16267485762415 473.790482243984 L 417 478 L 427.16267485762415 482.209517756016" stroke-miterlimit="10"></path></g><g transform="translate(-154,-30) scale(1,1)"><g><path fill="none" stroke="none"></path><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="399" y="476">9 : return SLURM_SUCCESS|ERROR</text></g></g></g></svg>